<div class="footer">
  <p>© {{ site.time | date: '%Y' }} {{ site.title }} · Fait avec Jekyll</p>
</div>

<div id="search-modal" class="search-modal" aria-hidden="true">
  <div class="search-box">
    <div class="row">
      <input id="search-input" type="search" placeholder="Search…" autocomplete="off" />
      <button id="search-close" class="close" aria-label="Close">✕</button>
    </div>
    <ul id="search-results"></ul>
    <div class="hint muted">Press Esc to close • Cmd/Ctrl + K to open</div>
  </div>
</div>

<script>
  const toggleBtn = document.getElementById('theme-toggle');
  const root = document.documentElement;

  // Charger préférence depuis localStorage
  if (localStorage.getItem('theme') === 'dark') {
    root.classList.add('theme-dark');
  }

  toggleBtn.addEventListener('click', () => {
    root.classList.toggle('theme-dark');
    if (root.classList.contains('theme-dark')) {
      localStorage.setItem('theme', 'dark');
    } else {
      localStorage.setItem('theme', 'light');
    }
  });
</script>
<script>
  (function(){
    var nav   = document.querySelector('.nav');
    var btn   = document.getElementById('nav-toggle');
    var menu  = document.getElementById('site-menu');
    var ovl   = document.querySelector('.nav__overlay');
    if (!nav || !btn || !menu || !ovl) return;

    function openMenu(){
      nav.setAttribute('data-open','true');
      btn.setAttribute('aria-expanded','true');
      document.body.classList.add('menu-open');
    }
    function closeMenu(){
      nav.setAttribute('data-open','false');
      btn.setAttribute('aria-expanded','false');
      document.body.classList.remove('menu-open');
    }

    btn.addEventListener('click', function(){
      (nav.getAttribute('data-open') === 'true') ? closeMenu() : openMenu();
    });
    ovl.addEventListener('click', closeMenu);
    menu.addEventListener('click', function(e){ if (e.target.tagName === 'A') closeMenu(); });
    window.addEventListener('resize', function(){ if (window.innerWidth > 860) closeMenu(); });
    window.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeMenu(); });
  })();
</script>